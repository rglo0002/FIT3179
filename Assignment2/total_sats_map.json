{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",  
  "title": "Total Satellites by Country",
    "width": "container",    
    "height": "container",
    "background": "#022338",
    "config": {
      "text": {"fill": "white"},  
      "title": {"color": "white", "font": "monospace"}, 
      "legend": {"labelColor": "white", "titleColor": "white", "labelFont": "monospace", "titleFont": "monospace"} 
    },
    "projection": {"type": "equalEarth"},
    "layer": [
      {
        "data": {
          "sphere": true
        },
        "mark": {
          "type": "geoshape",
          "fill": "#1699e0"
        }
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/2_symbol_map/js/WorldMapWithGraticules.topojson",
          "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
        },
        "mark": {"type": "geoshape", "fill": "green", "stroke": "white"}
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/2_symbol_map/js/WorldMapWithGraticules.topojson",
          "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
        },
        "mark": {"type": "geoshape", "fill": null, "stroke": "lightgray"}
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/rglo0002/FIT3179/main/merged_sat_data.csv"
        },
        "params": [
            {
            "name": "satsFilter",
            "select": {
                "type": "point",  
                "fields": ["Total_Satellites"]
            },
            "bind": "legend" 
            }
        ],
        "mark": 
        {
          "type": "circle"
        },
        "encoding": {
          "longitude": {"field": "Longitude", "type": "quantitative"},
          "latitude": {"field": "Latitude", "type": "quantitative"},
          "size": {
            "field": "Total_Satellites",
            "type": "quantitative",
            "title": "Total Satellites",
            "scale": {
              "type": "log",
              "domain": [1,10, 100, 1000, 2500],  
              "range": [10, 50, 100, 300, 700]     
            },
            "legend": {
              "title": "Total Satellites",
              "values": [10, 100, 1000, 2500],  
              "labelExpr": "datum.value == 10 ? '0-10' : datum.value == 100 ? '10-100' : datum.value == 1000 ? '100-1000' : '2500+'"
            }
          },
          "color": {
            "field": "Total_Satellites",
            "type": "quantitative",
            "title": "Total Satellites",
            "scale": 
              {
                "scheme": "reds",
                "domain": [1, 10, 100, 1000, 2500]
              }
          },
          "opacity": {
            "value": 0.2,
            "condition": {
                "param": "satsFilter",  
                "value": 0.9
            }
          },
          "tooltip": 
          [
            {"field": "Country", "type": "nominal"},
            {"field": "Total_Satellites", "type": "quantitative", "title": "Total Satellites"},
            {"field": "Total_Mass", "type": "quantitative", "title": "Total Mass (kg)"}
          ]
        }
      }
    ]
  }